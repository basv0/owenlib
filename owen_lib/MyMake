CPP=g++
LD=gcc
CFLAGS=-c -fpic -Wall
LFLAGS=-shared
SOURCES=owen_hash.cpp port_io.cpp owen_io.cpp
OBJECTS=$(SOURCES:.cpp=.o)
SHAREDOBJ=owen_io
TARGET=$(SHAREDOBJ).so

all: $(SOURCES) $(SHAREDOBJ)

$(TARGET): $(OBJECTS)
	$(LD) $(LFLAGS) $(OBJECTS) -o $@
	
.cpp.o:
	$(CPP) $(CFLAGS) $< -o $@
	
clean:
	rm $(OBJECTS) $(TARGET)
	
install:
	cp $(SHAREDOBJ).so /usr/lib64/
	cp $(SHAREDOBJ).h /usr/include/
	
uninstall:
	rm /usr/lib64/$(SHAREDOBJ).so
	rm /usr/include/$(SHAREDOBJ).h

